# SSH Server Configuration for Remote Access
# Port 2222 for security (non-standard port)
Port 2222
Protocol 2

# Host key configuration
HostKey /etc/ssh/ssh_host_ed25519_key
HostCertificate /etc/ssh/ssh_host_ed25519_key-cert.pub

# Certificate authentication
TrustedUserCAKeys /etc/ssh/trusted_user_ca_keys
PubkeyAuthentication yes
PasswordAuthentication no
ChallengeResponseAuthentication no

# User restrictions
PermitRootLogin no
AllowUsers $(whoami)
MaxAuthTries 3
MaxSessions 10

# Keep connections alive for mobile devices
ClientAliveInterval 300
ClientAliveCountMax 2
TCPKeepAlive yes

# Performance tuning
UseDNS no
Compression yes

# Security features
X11Forwarding no
AllowAgentForwarding yes
AllowTcpForwarding yes
PermitTunnel no
GatewayPorts no

# Logging
LogLevel VERBOSE

# Rate limiting
MaxStartups 3:30:10
PerSourceMaxStartups 2
PerSourceNetBlockSize 32